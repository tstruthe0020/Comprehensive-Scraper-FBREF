
===== FBREF Multi-Season Scraper API Tests =====


🔍 Testing Health Check...
✅ Passed - Status: 200

🔍 Testing Demo Scrape...
✅ Passed - Status: 200
Demo message: Demo: Successfully processed 2 seasons | Total match links extracted: 5 | Excel file generated with 5 match sheets
Total links: 5
Number of seasons: 2
✅ Excel file saved to /tmp/fbref_test_output/demo_FBREF_Matches_2023-2024_2022-2023.xlsx
✅ Excel file contains Summary sheet + 5 match sheets
✅ Match Report URL found in row 4, column 2
✅ Excel file structure validated successfully
✅ Demo scrape response has expected structure

Testing with a single URL. This may take some time...

🔍 Testing Single URL Scrape...
✅ Passed - Status: 200
Scrape message: Successfully processed 1/1 seasons | Total match links extracted: 380 | Excel file generated with 380 match sheets
Total links: 380
✅ Successfully extracted 380 links
✅ Excel file saved to /tmp/fbref_test_output/single_FBREF_Matches_9.xlsx
✅ Excel file contains Summary sheet + 380 match sheets
✅ Match Report URL found in row 4, column 2
✅ Excel file structure validated successfully
✅ Single URL scrape response has expected structure

Testing with multiple URLs. This may take some time...

🔍 Testing Multi URL Scrape...
✅ Passed - Status: 200
Scrape message: Successfully processed 2/2 seasons | Total match links extracted: 760 | Excel file generated with 760 match sheets
Total links: 760
✅ Successfully scraped 2/2 seasons
✅ Excel file saved to /tmp/fbref_test_output/multi_FBREF_Matches_9_2023-2024.xlsx
✅ Excel file contains Summary sheet + 760 match sheets
✅ Match Report URL found in row 4, column 2
✅ Excel file structure validated successfully
✅ Multi URL scrape response has expected structure

🔍 Testing Invalid URL Scrape...
✅ Passed - Status: 200
✅ Invalid URL correctly rejected

🔍 Testing Mixed URLs Scrape...
✅ Passed - Status: 200
✅ Mixed URLs handled correctly

🔍 Testing Real Premier League Seasons (2022-2023 and 2023-2024)...
⚠️ This test may take several minutes to complete due to the large dataset

🔍 Testing Premier League Seasons Scrape...
✅ Passed - Status: 200
Scrape message: Successfully processed 2/2 seasons | Total match links extracted: 760 | Excel file generated with 760 match sheets
Total links: 760
✅ Successfully extracted 760 match links
✅ Excel file saved to /tmp/fbref_test_output/premier_league_FBREF_Matches_2022-2023_2023-2024.xlsx
✅ Excel file contains Summary sheet + 760 match sheets
✅ Match Report URL found in row 4, column 2
✅ Excel file structure validated successfully
✅ Premier League seasons scrape successful

📊 Tests passed: 8/7

===== Test Summary =====
Health Check: ✅
Demo Scrape: ✅
Single URL Scrape: ✅
Multi URL Scrape: ✅
Invalid URL Handling: ✅
Mixed URLs Handling: ✅
Real Premier League Seasons: ✅
